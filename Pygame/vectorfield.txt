
# Proton Missile 

spacing = 100
magnitude = 170

def setup():
    size(640, 480)
    noCursor()
    blendMode(ADD)

def draw():
    background(32)
    fill(255)
    textAlign(LEFT, BOTTOM)
    text("PRESS ME", 20, height-40)

    mouse_pos = PVector(mouseX, mouseY)

    for grid_x in range(spacing // 2, width, spacing):
        for grid_y in range(spacing // 2, height, spacing):

            grid_pos = PVector(grid_x, grid_y)
            
            #destino - origem
            direction = PVector.sub(mouse_pos, grid_pos)
            distance_to_mouse = direction.mag()

            direction.normalize()
            
            #end_pos = origem + direção_normalizada * magnitude
            end_pos = PVector.add(grid_pos, PVector.mult(direction, magnitude))
            
            if(mousePressed):
                #vector field original
                strokeWeight(1)
                stroke(255,255,255,150)
                line(grid_pos.x, grid_pos.y, end_pos.x, end_pos.y)

            # se for nulo ou a distancia ao mouse for maior que a magnitude do vector de referencia.
            # nao desenha
            if distance_to_mouse == 0 or distance_to_mouse >= magnitude:
                continue
            
            #desenha desde o mouse ate ao fim do comprimento do vector                   
            strokeWeight(3)
            stroke(255,255,255,160)
            line(mouse_pos.x, mouse_pos.y, end_pos.x, end_pos.y)
            
            strokeWeight(20)
            stroke(0,255,255,50)
            line(mouse_pos.x, mouse_pos.y, end_pos.x, end_pos.y)

    noStroke()
    fill(0, 255, 255, 50)
    circle(mouseX, mouseY, 50)
    circle(mouseX, mouseY, 100)
    
    
    
    